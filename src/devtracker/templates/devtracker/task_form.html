{% extends 'devtracker/base_tracker.html' %}
{% load static i18n %}

{% block title %}{% if is_create %}{% trans "Create Task" %}{% else %}{% trans "Edit Task" %}{% endif %} - DevTracker{% endblock %}

{% block content %}
<div class="container">
    <div class="form-container">
        <div class="form-header">
            <h1 class="form-title">
                {% if is_create %}
                    {% trans "Create New Task" %}
                {% else %}
                    {% trans "Edit Task" %}
                {% endif %}
            </h1>
            <p class="form-subtitle">{% trans "For project:" %} {{ project.name }}</p>
        </div>

        <div class="project-card">
            <form method="post">
                {% csrf_token %}
                
                {% if form.errors %}
                    <div class="message message-error">
                        <strong>{% trans "Please correct the errors below" %}</strong>
                    </div>
                {% endif %}

                <div class="form-group">
                    <label for="{{ form.title.id_for_label }}">
                        {% trans "Task Title" %} *
                    </label>
                    {{ form.title }}
                    {% if form.title.errors %}
                        <div class="form-errors">
                            {{ form.title.errors }}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.description.id_for_label }}">
                        {% trans "Description" %}
                    </label>
                    {{ form.description }}
                    {% if form.description.errors %}
                        <div class="form-errors">
                            {{ form.description.errors }}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.priority.id_for_label }}">
                        {% trans "Priority" %}
                    </label>
                    {{ form.priority }}
                    {% if form.priority.errors %}
                        <div class="form-errors">
                            {{ form.priority.errors }}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label class="checkbox-label">
                        {{ form.is_completed }}
                        <span>{% trans "Mark as completed" %}</span>
                    </label>
                    {% if form.is_completed.errors %}
                        <div class="form-errors">
                            {{ form.is_completed.errors }}
                        </div>
                    {% endif %}
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn">
                        {% if is_create %}
                            {% trans "Create Task" %}
                        {% else %}
                            {% trans "Update Task" %}
                        {% endif %}
                    </button>
                    <a href="{% url 'devtracker:project_detail' slug=project.slug %}" class="btn btn-secondary">
                        {% trans "Cancel" %}
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}