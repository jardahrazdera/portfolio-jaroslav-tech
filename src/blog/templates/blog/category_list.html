{% extends 'core/base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{{ category.name }} - Blog - {{ block.super }}{% endblock %}

{% block meta_description %}{% trans "Posts in category" %} {{ category.name }} - {% trans "Read blog posts about" %} {{ category.name|lower }}{% endblock %}

{% block extra_head %}
{% if debug %}
<link rel="stylesheet" href="{% static 'blog/css/blog.css' %}">
{% else %}
<link rel="stylesheet" href="{% static 'dist/blog.min.css' %}">
{% endif %}
{% endblock %}

{% block before_main %}
{% include 'blog/components/breadcrumb.html' with category=category filter_type='category' %}
{% endblock %}

{% block content %}
<section class="content-section">
    <div class="container">
        <h2>{% trans "Posts in" %} {{ category.name }}</h2>

        {% include 'blog/components/sidebar.html' with categories=categories tags=tags %}

        {% if posts %}
            <div class="projects-grid">
                {% for post in posts %}
                    {% include 'blog/components/post_card.html' with post=post %}
                {% endfor %}
            </div>

            {% if is_paginated %}
                <div class="pagination-container">
                    <nav aria-label="{% trans 'Blog posts pagination' %}">
                        <div class="pagination">
                            {% if page_obj.has_previous %}
                                <a href="{% url 'blog:category_list' category.slug %}?page={{ page_obj.previous_page_number }}"
                                   class="btn btn-primary"
                                   aria-label="{% trans 'Previous page' %}">
                                    &larr; {% trans "Previous" %}
                                </a>
                            {% endif %}

                            <span class="page-info">
                                {% trans "Page" %} {{ page_obj.number }} {% trans "of" %} {{ page_obj.paginator.num_pages }}
                            </span>

                            {% if page_obj.has_next %}
                                <a href="{% url 'blog:category_list' category.slug %}?page={{ page_obj.next_page_number }}"
                                   class="btn btn-primary"
                                   aria-label="{% trans 'Next page' %}">
                                    {% trans "Next" %} &rarr;
                                </a>
                            {% endif %}
                        </div>
                    </nav>
                </div>
            {% endif %}
        {% else %}
            <div class="hero-content">
                <p class="hero-subtitle">{% trans "No posts found in this category yet. Check back soon for updates!" %}</p>
                <div class="hero-buttons">
                    <a href="{% url 'blog:post_list' %}" class="btn btn-primary">{% trans "View All Posts" %}</a>
                </div>
            </div>
        {% endif %}
    </div>
</section>
{% endblock %}