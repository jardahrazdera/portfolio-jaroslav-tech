{% extends 'core/base.html' %}
{% load static %}

{% block title %}{{ post.title }} - {{ block.super }}{% endblock %}

{% block extra_head %}
{% if debug %}
<link rel="stylesheet" href="{% static 'blog/css/blog.css' %}">
{% else %}
<link rel="stylesheet" href="{% static 'dist/blog.min.css' %}">
{% endif %}
{% endblock %}

{% block content %}
<section class="content-section">
    <div class="container">
        <article class="post-detail">
            <header class="post-header">
                <h2>{{ post.title }}</h2>

                <div class="blog-post-meta">
                    <time>{{ post.created_at|date:"F j, Y" }}</time>
                    <span class="author">by {{ post.author.get_full_name|default:post.author.username }}</span>

                    {% if post.updated_at != post.created_at %}
                        <span class="last-updated">Last updated: {{ post.updated_at|date:"F j, Y" }}</span>
                    {% endif %}
                </div>

                {% if post.categories.exists or post.tags.exists %}
                    <div class="post-taxonomy">
                        {% if post.categories.exists %}
                            <div class="post-categories">
                                {% for category in post.categories.all %}
                                    <span class="blog-category">{{ category.name }}</span>
                                {% endfor %}
                            </div>
                        {% endif %}

                        {% if post.tags.exists %}
                            <div class="post-tags">
                                {% for tag in post.tags.all %}
                                    <span class="blog-tag" style="border-color: {{ tag.color }}">{{ tag.name }}</span>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                {% endif %}
            </header>

            <div class="blog-content">
                {{ post.content|linebreaks }}
            </div>
        </article>

        <nav class="blog-navigation">
            <div class="hero-buttons">
                <a href="{% url 'blog:post_list' %}" class="btn btn-primary">&larr; Back to Blog</a>
            </div>
        </nav>
    </div>
</section>
{% endblock %}