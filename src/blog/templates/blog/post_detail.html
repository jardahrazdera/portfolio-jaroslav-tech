{% extends 'core/base.html' %}

{% block title %}{{ post.title }} - {{ block.super }}{% endblock %}

{% block content %}
<div class="container">
    <article class="post-detail">
        <header class="post-header">
            <h1>{{ post.title }}</h1>

            <div class="post-meta">
                <p>
                    Published on {{ post.created_at|date:"F j, Y" }}
                    by {{ post.author.get_full_name|default:post.author.username }}
                </p>

                {% if post.updated_at != post.created_at %}
                    <p>Last updated: {{ post.updated_at|date:"F j, Y" }}</p>
                {% endif %}
            </div>

            {% if post.categories.exists %}
                <div class="post-categories">
                    <strong>Categories:</strong>
                    {% for category in post.categories.all %}
                        <span class="category">{{ category.name }}</span>{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </div>
            {% endif %}

            {% if post.tags.exists %}
                <div class="post-tags">
                    <strong>Tags:</strong>
                    {% for tag in post.tags.all %}
                        <span class="tag" style="color: {{ tag.color }}">{{ tag.name }}</span>{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </div>
            {% endif %}
        </header>

        <div class="post-content">
            {{ post.content|linebreaks }}
        </div>
    </article>

    <div class="post-navigation">
        <a href="{% url 'blog:post_list' %}">&larr; Back to Blog</a>
    </div>
</div>
{% endblock %}