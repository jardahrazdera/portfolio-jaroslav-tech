{% extends 'core/base.html' %}
{% load static %}

{% block title %}Blog - {{ block.super }}{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'blog/css/blog.css' %}">
{% endblock %}

{% block content %}
<section class="content-section">
    <div class="container">
        <h2>Blog Posts</h2>

        {% if posts %}
            <div class="projects-grid">
                {% for post in posts %}
                    <article class="blog-post-card project-card">
                        <header class="post-header">
                            <h3><a href="{% url 'blog:post_detail' post.slug %}">{{ post.title }}</a></h3>

                            <div class="blog-post-meta">
                                <time>{{ post.created_at|date:"F j, Y" }}</time>
                                <span class="author">by {{ post.author.get_full_name|default:post.author.username }}</span>
                            </div>
                        </header>

                        {% if post.excerpt %}
                            <p class="post-excerpt">{{ post.excerpt }}</p>
                        {% else %}
                            <p class="post-excerpt">{{ post.content|truncatewords:50 }}</p>
                        {% endif %}

                        {% if post.categories.exists %}
                            <div class="post-categories">
                                {% for category in post.categories.all %}
                                    <span class="blog-category">{{ category.name }}</span>
                                {% endfor %}
                            </div>
                        {% endif %}

                        {% if post.tags.exists %}
                            <div class="post-tags">
                                {% for tag in post.tags.all %}
                                    <span class="blog-tag" style="border-color: {{ tag.color }}">{{ tag.name }}</span>
                                {% endfor %}
                            </div>
                        {% endif %}

                        <div class="project-links">
                            <a href="{% url 'blog:post_detail' post.slug %}" class="btn btn-primary">Read Article</a>
                        </div>
                    </article>
                {% endfor %}
            </div>
        {% else %}
            <div class="hero-content">
                <p class="hero-subtitle">No blog posts available yet. Check back soon for updates!</p>
            </div>
        {% endif %}
    </div>
</section>
{% endblock %}