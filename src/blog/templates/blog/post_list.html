{% extends 'core/base.html' %}
{% load static %}

{% block title %}Blog - {{ block.super }}{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'blog/css/blog.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <h1>Blog Posts</h1>

    {% if posts %}
        <div class="posts-list">
            {% for post in posts %}
                <article class="blog-post-card">
                    <h2><a href="{% url 'blog:post_detail' post.slug %}">{{ post.title }}</a></h2>

                    <div class="blog-post-meta">
                        <time>{{ post.created_at|date:"F j, Y" }}</time>
                        <span class="author">by {{ post.author.get_full_name|default:post.author.username }}</span>
                    </div>

                    {% if post.excerpt %}
                        <p class="post-excerpt">{{ post.excerpt }}</p>
                    {% else %}
                        <p class="post-excerpt">{{ post.content|truncatewords:50 }}</p>
                    {% endif %}

                    {% if post.categories.exists %}
                        <div class="post-categories">
                            {% for category in post.categories.all %}
                                <span class="blog-category">{{ category.name }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}

                    {% if post.tags.exists %}
                        <div class="post-tags">
                            {% for tag in post.tags.all %}
                                <span class="blog-tag" style="border-color: {{ tag.color }}">{{ tag.name }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}

                    <a href="{% url 'blog:post_detail' post.slug %}" class="read-more">Read more â†’</a>
                </article>
            {% endfor %}
        </div>
    {% else %}
        <p>No blog posts available yet.</p>
    {% endif %}
</div>
{% endblock %}