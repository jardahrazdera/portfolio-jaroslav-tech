/* CKEditor Source Code Readability Fix */

/* Target the source area textarea specifically */
.cke_source,
textarea.cke_source {
    background-color: #2d3748 !important;
    color: #e2e8f0 !important;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Courier New', monospace !important;
    font-size: 14px !important;
    line-height: 1.5 !important;
    padding: 12px !important;
    border: 1px solid #4a5568 !important;
    border-radius: 4px !important;
    tab-size: 4 !important;
    -moz-tab-size: 4 !important;
}

/* Fix text selection in source mode */
.cke_source::selection,
textarea.cke_source::selection {
    background-color: #4299e1 !important;
    color: white !important;
}

.cke_source::-moz-selection,
textarea.cke_source::-moz-selection {
    background-color: #4299e1 !important;
    color: white !important;
}

/* Focus state for better visibility */
.cke_source:focus,
textarea.cke_source:focus {
    outline: 2px solid #4299e1 !important;
    outline-offset: 2px !important;
    border-color: #4299e1 !important;
}

/* Ensure the container doesn't override our styles */
.cke_contents .cke_source {
    background-color: #2d3748 !important;
    color: #e2e8f0 !important;
}

/* Alternative selectors for different CKEditor versions */
.cke_dialog_ui_input_textarea textarea,
.cke_dialog_ui_input_text input[type="text"] {
    background-color: white !important;
    color: #333 !important;
}

/* Only target source mode specifically */
.cke_source_mode .cke_source {
    background-color: #2d3748 !important;
    color: #e2e8f0 !important;
}

/* Make CKEditor more flexible and responsive */
.cke {
    max-width: none !important;
    overflow: visible !important;
}

.cke_inner {
    max-width: none !important;
}

.cke_contents {
    min-height: 300px !important;
}

/* Improve resizer visibility and functionality */
.cke_resizer {
    background: #4a5568 !important;
    border: 1px solid #2d3748 !important;
    width: 15px !important;
    height: 15px !important;
    cursor: se-resize !important;
    position: relative !important;
    /* Add resize grip pattern */
    background-image:
        linear-gradient(135deg, transparent 25%, #e2e8f0 25%, #e2e8f0 35%, transparent 35%),
        linear-gradient(45deg, transparent 25%, #e2e8f0 25%, #e2e8f0 35%, transparent 35%) !important;
    background-size: 4px 4px !important;
    background-position: 0 0, 2px 2px !important;
}

.cke_resizer:hover {
    background-color: #2d3748 !important;
    border-color: #4299e1 !important;
    /* Enhance grip pattern on hover */
    background-image:
        linear-gradient(135deg, transparent 25%, #f7fafc 25%, #f7fafc 35%, transparent 35%),
        linear-gradient(45deg, transparent 25%, #f7fafc 25%, #f7fafc 35%, transparent 35%) !important;
}

/* Alternative approach with CSS-only grip dots */
.cke_resizer::after {
    content: '';
    position: absolute;
    bottom: 2px;
    right: 2px;
    width: 8px;
    height: 8px;
    background:
        radial-gradient(circle at 1px 1px, #e2e8f0 1px, transparent 1px),
        radial-gradient(circle at 5px 1px, #e2e8f0 1px, transparent 1px),
        radial-gradient(circle at 1px 5px, #e2e8f0 1px, transparent 1px),
        radial-gradient(circle at 5px 5px, #e2e8f0 1px, transparent 1px);
    background-size: 6px 6px;
    pointer-events: none;
}

.cke_resizer:hover::after {
    background:
        radial-gradient(circle at 1px 1px, #f7fafc 1px, transparent 1px),
        radial-gradient(circle at 5px 1px, #f7fafc 1px, transparent 1px),
        radial-gradient(circle at 1px 5px, #f7fafc 1px, transparent 1px),
        radial-gradient(circle at 5px 5px, #f7fafc 1px, transparent 1px);
}

/* Critical: Allow width expansion beyond container */
.field-content,
.form-row .field-content,
.form-row,
.fieldBox {
    max-width: none !important;
    overflow: visible !important;
}

/* Django admin specific overrides */
.change-form .form-row {
    overflow: visible !important;
}

.change-form fieldset {
    overflow: visible !important;
}

.change-form .fieldBox {
    overflow: visible !important;
    max-width: none !important;
}

/* Ensure the editor can expand beyond the fieldset */
.cke_editor_id_content {
    max-width: none !important;
    overflow: visible !important;
}

/* Allow horizontal scrolling if needed */
.change-form {
    overflow-x: auto !important;
}

/* Better responsive behavior */
@media (max-width: 768px) {
    .cke {
        width: 100% !important;
        max-width: 100% !important;
    }
}